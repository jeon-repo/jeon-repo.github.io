---
layout: post
title: "[Python] ë¦¬ìŠ¤íŠ¸ ë³µì‚¬"
color: green
author: janos
tags: [Python]
---

---

ë‚´ê°€ ê·¸ë¬ë“¯ì´ íŒŒì´ì¬ ì‚¬ìš©ìë“¤ì´ ìì£¼ í—·ê°ˆë ¤í•˜ëŠ” ë¦¬ìŠ¤íŠ¸ ë³µì‚¬ì— ëŒ€í•œ ë‚´ìš©ì„ ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.

íŒŒì´ì¬ì˜ ë¦¬ìŠ¤íŠ¸ ë³µì‚¬ëŠ” 4ê°€ì§€ ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤.

1. ë°ì´í„°ë¥¼ ê°€ë¦¬í‚¤ëŠ” ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ë³µì‚¬í•˜ëŠ” ê²½ìš°
2. ë°ì´í„° ìì²´ë¥¼ ë³µì‚¬í•˜ëŠ” ê²½ìš°
3. mutable ë°ì´í„°ì˜ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ë³µì‚¬í•˜ëŠ” ê²½ìš°
4. mutable ë°ì´í„° ìì²´ë¥¼ ë³µì‚¬í•˜ëŠ” ê²½ìš°

ë³´ê¸°ì‰½ê²Œ ì½”ë“œë¡œ ë¨¼ì € í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.

### [1ë²ˆ ì½”ë“œ]

```python
origin_data = [1, 2, 3, 4, 5]
copy_data = origin_data

# id()ëŠ” íŒŒì´ì¬ì´ ê°ì²´ë¥¼ êµ¬ë³„í•˜ê¸° ìœ„í•´ ë¶€ì—¬í•˜ëŠ” ì½”ë“œê°’
# ë™ì¼ ê°ì²´ ì—¬ë¶€ë¥¼ íŒë³„í•  ë•Œ ì‚¬ìš©
print(f'origin_data: {origin_data} / id: {id(origin_data)}')
print(f'copy_data: {copy_data} / id: {id(copy_data)}')
```

![Result]({{ "/assets/img/post/2021-08-25-ë¦¬ìŠ¤íŠ¸-ë³µì‚¬/1ë²ˆì˜1.png" | relative_url }})

ê²°ê³¼ë¥¼ ë³´ë©´ idê°’ì´ ë™ì¼í•œ ê²ƒì„ ë³´ì•„ ê°™ì€ ë°ì´í„°ë¼ê³  ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê·¸ë¦¬ê³ 

`copy_data`ì˜ ë°ì´í„°ë¥¼ ë³€ê²½í•´ë´¤ìŠµë‹ˆë‹¤.

```python
copy_data[0] = 10
print(f'origin_data: {origin_data} / id: {id(origin_data)}')
print(f'copy_data: {copy_data} / id: {id(copy_data)}')
```

![Result]({{ "/assets/img/post/2021-08-25-ë¦¬ìŠ¤íŠ¸-ë³µì‚¬/1ë²ˆì˜2.png" | relative_url }})

`origin_data`ì˜ ë°ì´í„° ì—­ì‹œ ë³€ê²½ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
ì´ê²ƒìœ¼ë¡œ `copy_data` ë³€ìˆ˜ëŠ” `origin_data`ì˜ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ë³µì‚¬í–ˆë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### [2ë²ˆ ì½”ë“œ]

```python
from copy import copy
origin_data = [1, 2, 3, 4, 5]
copy_data1 = origin_data[:]
copy_data2 = copy(origin_data)
# ì•„ë˜ëŠ” ìœ„ì˜ 2ê°€ì§€ ë°©ì‹ê³¼ ë™ì¼í•˜ê²Œ ë³µì‚¬ë˜ëŠ” ë°©ë²•
# copy_data = list(origin_data)
# copy_data = [] + origin_data

print(f'origin_data: {origin_data} / id: {id(origin_data)}')
print(f'copy_data1: {copy_data1} / id: {id(copy_data1)}')
print(f'copy_data2: {copy_data2} / id: {id(copy_data2)}')
```

![Result]({{ "/assets/img/post/2021-08-25-ë¦¬ìŠ¤íŠ¸-ë³µì‚¬/2ë²ˆì˜1.png" | relative_url }})

idê°’ì´ ê°ê° ë‹¤ë¥´ê²Œ ë‚˜ì˜¨ ê²ƒì„ ë³´ë©´ `[:]`ì™€ `copy()` ëª¨ë‘ ì›í•˜ë˜ ë°ì´í„° ë³µì‚¬ê°€ ìˆ˜í–‰ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

`copy_data1, 2`ì˜ ë°ì´í„°ë¥¼ ë³€ê²½í•´ë´¤ìŠµë‹ˆë‹¤.

```python
copy_data[0] = 10
print(f'origin_data: {origin_data} / id: {id(origin_data)}')
print(f'copy_data: {copy_data} / id: {id(copy_data)}')
```

![Result]({{ "/assets/img/post/2021-08-25-ë¦¬ìŠ¤íŠ¸-ë³µì‚¬/2ë²ˆì˜2.png" | relative_url }})

`copy_data1, 2`ë¥¼ ë³€ê²½í•´ë„ `origin_data`ê°€ ë³€ê²½ë˜ì§€ ì•ŠëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ê²Œ ì™„ì „íˆ ë³µì‚¬ê°€ ëœ ê²ƒì¼ê¹Œ?

ì•„ë‹™ë‹ˆë‹¤, `origin_data`ì˜ ë°ì´í„°ê°€ mutable ê°ì²´ì¸ ê²½ìš°ëŠ” ë‹¤ë¦…ë‹ˆë‹¤.

### [3ë²ˆ ì½”ë“œ]

```python
from copy import copy
origin_data = [[1, 2], [3, 4]]
copy_data1 = origin_data[:]
copy_data2 = copy(origin_data)

copy_data1[0][0] = 10
copy_data2[1] = 20
print(f'origin_data: {origin_data} / id: {id(origin_data)}')
print(f'copy_data1: {copy_data1} / id: {id(copy_data1)}')
print(f'copy_data2: {copy_data2} / id: {id(copy_data2)}')
```

![Result]({{ "/assets/img/post/2021-08-25-ë¦¬ìŠ¤íŠ¸-ë³µì‚¬/3ë²ˆì˜1.png" | relative_url }})

`copy_data1`ì˜ 0ë²ˆ ì¸ë±ìŠ¤ì˜ ë°ì´í„°ëŠ” `[1, 2]` ë¡œ mutable ë°ì´í„°ì…ë‹ˆë‹¤.  
mutable ë°ì´í„° ì•ˆì— ìˆëŠ” ë°ì´í„°ë¥¼ ë³€ê²½í•˜ëŠ” ê²½ìš°ëŠ” `origin_data`ì˜ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ë³µì‚¬í•´ì„œ ê°–ê³  ìˆê¸° ë•Œë¬¸ì— `copy_data1, 2`ì˜ ë°ì´í„°ê°€ ëª¨ë‘ ë³€í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
3ê°œ ë³€ìˆ˜ ëª¨ë‘ : [1, 2] â†’ [10, 2]  

í•˜ì§€ë§Œ mutable ë°ì´í„° ì „ì²´ë¥¼ ë‹¤ë¥¸ ë°ì´í„° `20` ìœ¼ë¡œ ë³€ê²½í•œ ê²½ìš°ëŠ” ì •ìƒì ìœ¼ë¡œ `copy_data2`ë§Œ ë³€ê²½ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
`copy_data2`ë§Œ : [3, 4] â†’ 20

ì´ëŸ° ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” 4ë²ˆ ë°©ì‹ì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

### [4ë²ˆ ì½”ë“œ]

```python
from copy import deepcopy
origin_data = [[1, 2], [3, 4]]
copy_data1 = deepcopy(origin_data)

copy_data1[0][0] = 10
print(f'origin_data: {origin_data} / id: {id(origin_data)}')
print(f'copy_data1: {copy_data1} / id: {id(copy_data1)}')
```

![Result]({{ "/assets/img/post/2021-08-25-ë¦¬ìŠ¤íŠ¸-ë³µì‚¬/4ë²ˆì˜1.png" | relative_url }})

`deepcopy()` í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œ ë³µì‚¬ë§Œ mutable ë°ì´í„°ê¹Œì§€ ì™„ì „í•˜ê²Œ ë³µì‚¬ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ ê·¸ë ‡ë‹¤ê³  `deepcopy()`ê°€ ë§ŒëŠ¥ì€ ì•„ë‹™ë‹ˆë‹¤.

ì´ìœ ëŠ” ë³µì‚¬í•˜ëŠ” ì†ë„ì˜ ì°¨ì´ê°€ êµ‰ì¥íˆ í¬ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

ì†ë„ê°€ ê°€ì¥ ë¹ ë¥¸ ìŠ¬ë¼ì´ìŠ¤ í˜•ì‹ì˜ ë³µì‚¬ `[:]` ì— ë¹„í•´ì„œ `deepcopy` ë³µì‚¬ëŠ” 30ë°° ì´ìƒ ëŠë¦½ë‹ˆë‹¤.

ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìƒí™©ì— ë§ëŠ” ë°©ì‹ì„ ì ì ˆíˆ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

> ğŸ“Œ Stack Overflow - [ë³µì‚¬ ì†ë„ì— ëŒ€í•œ ë‚´ìš©](https://stackoverflow.com/questions/2612802/list-changes-unexpectedly-after-assignment-why-is-this-and-how-can-i-prevent-it)